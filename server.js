const express = require("express"); const sql = require("mssql"); const bodyParser = require("body-parser"); const path = require("path"); const app = express(); app.use(bodyParser.json()); app.use(express.static(path.join(__dirname, '/'))); // Database configuration const config = { user: 'your_sql_user', // Replace with your SQL username password: 'your_password', // Replace with your SQL password server: 'your_sql_server.database.windows.net', // Replace with your SQL server name database: 'userinputdb', // Replace with your database name options: { encrypt: true // Always use encryption for Azure SQL Database } }; // Route to handle form data submission app.post("/submit", async (req, res) => { try { // Connect to SQL Server let pool = await sql.connect(config); // Insert user input into the database await pool.request() .input("name", sql.NVarChar, req.body.name) // Get 'name' from the request body .query("INSERT INTO UserInputs (Name) VALUES (@name)"); // Send response back to client res.sendStatus(200); // Success status } catch (err) { console.error("Database error:", err); res.status(500).send("Database error"); } }); // Start server app.listen(process.env.PORT || 3000, () => console.log("Server running"));
